<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì°½ì„¸ê¸° ì„±ê²½ í€´ì¦ˆ</title>
  <style>
    :root{
      --bg:#0b1020;--card:#121a34;--ink:#e8eeff;--muted:#9fb0ff;--accent:#7aa2ff;--good:#3ad39f;--bad:#ff6b6b;--warn:#ffb84d;
      --br:18px;--gap:14px;--shadow:0 10px 30px rgba(0,0,0,.25);
    }
    *{box-sizing:border-box}
    body{margin:0;background:radial-gradient(1200px 800px at 25% -10%,#1e2a56 0%,#0b1020 50%),var(--bg);color:var(--ink);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";}
    .wrap{max-width:960px;margin:24px auto;padding:16px;position:relative}
    header{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:16px}
    .brand{display:flex;align-items:center;gap:10px}
    .brand .logo{width:42px;height:42px;border-radius:50%;background:linear-gradient(135deg,#6fa3ff, #9f78ff);display:grid;place-items:center;font-weight:800;color:white;box-shadow:var(--shadow)}
    .card{background:var(--card);border-radius:var(--br);box-shadow:var(--shadow);padding:20px}
    .center{display:grid;place-items:center;min-height:60vh}
    .stack{display:flex;flex-direction:column;gap:var(--gap)}
    input[type="text"]{width:100%;padding:14px 16px;border-radius:12px;border:1px solid #233066;background:#0f1731;color:var(--ink);outline:none}
    button{border:0;padding:12px 16px;border-radius:12px;background:linear-gradient(135deg,#6fa3ff,#9f78ff);color:white;font-weight:700;cursor:pointer}
    button.ghost{background:transparent;border:1px solid #2e3a70}
    .muted{color:var(--muted);font-size:.95rem}
    .row{display:flex;gap:10px;align-items:center}
    .row.wrap{flex-wrap:wrap}
    .grow{flex:1}
    .score{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .badge{padding:6px 10px;border-radius:999px;background:#0f1731;border:1px solid #273571}
    .progress{width:100%;height:10px;background:#0f1731;border-radius:999px;overflow:hidden;border:1px solid #26336b}
    .progress>div{height:100%;background:linear-gradient(90deg,#ffb84d,#ff6b6b);width:100%}
    .verse{font-size:1.25rem;line-height:1.9}
    .verse .blank{display:inline-block;min-width:8ch;padding:.15rem .35rem;border-bottom:2px dashed #5a73d6;border-radius:6px;background:rgba(122,162,255,.06)}
    .result{padding:12px 14px;border-radius:12px;background:#0f1731;border:1px solid #243267}
    .result.good{border-color:#24674d;background:#0f1d19}
    .result.bad{border-color:#673024;background:#1d1010}
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px;border-bottom:1px solid #243267;text-align:left}
    #adminBtn{position:fixed;bottom:10px;right:10px;background:none;border:none;font-size:24px;cursor:pointer;z-index:5;}
    .card, button{position:relative;z-index:1;}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">BS</div>
        <div>
          <div style="font-weight:800">ì°½ì„¸ê¸° ì„±ê²½ í€´ì¦ˆ</div>
          <div class="muted">ë¹ˆì¹¸ ì±„ìš°ê¸° Â· 20ì´ˆ íƒ€ì´ë¨¸ Â· ì •ë‹µ +30ì </div>
        </div>
      </div>
      <div class="row score" id="scoreBoard" style="display:none">
        <div class="badge"><span id="playerBadge">ê²ŒìŠ¤íŠ¸</span></div>
        <div class="badge">ì ìˆ˜: <b id="score">0</b> / 1000</div>
        <div class="badge warn">ë‚¨ì€ì‹œê°„: <b id="time">20</b>s</div>
        <div class="badge">ë¬¸í•­: <b id="qIndex">0</b></div>
        <div class="badge">ê¸°íšŒ: <b id="lives">10</b></div>
      </div>
    </header>

    <!-- ì‹œì‘ í™”ë©´ -->
    <section id="start" class="card center">
      <div class="stack" style="max-width:520px">
        <h1>ì‹œì‘í•˜ê¸°</h1>
        <input id="nameInput" type="text" placeholder="ì´ë¦„ (ì˜ˆ: í™ê¸¸ë™)" />
        <div class="row">
          <button id="startBtn" type="button" class="grow">ì‹œì‘í•˜ê¸°</button>
          <button id="rankBtn" type="button" class="ghost">ë­í‚¹ ë³´ê¸°</button>
          <button id="howBtn" type="button" class="ghost">ê·œì¹™ ë³´ê¸°</button>
        </div>
      </div>
    </section>

    <!-- í€´ì¦ˆ í™”ë©´ -->
    <section id="quiz" class="card" style="display:none">
      <div class="stack">
        <div class="progress"><div id="bar"></div></div>
        <div class="muted" id="ref"></div>
        <div class="verse" id="verse"></div>
        <div class="row wrap">
          <input id="answer" class="grow" type="text" placeholder="ë¹ˆì¹¸ì— ë“¤ì–´ê°ˆ ë‹¨ì–´" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" inputmode="text" />
          <button id="submitBtn" type="button">ì œì¶œ</button>
          <button id="passBtn" type="button" class="ghost">íŒ¨ìŠ¤</button>
        </div>
        <div id="feedback" class="result" style="display:none"></div>
      </div>
    </section>

    <!-- ë­í‚¹ í™”ë©´ -->
    <section id="leaderboard" class="card" style="display:none">
      <div class="stack">
        <h2>ë­í‚¹</h2>
        <div class="row">
          <button id="backStart" type="button" class="ghost">ì‹œì‘ í™”ë©´</button>
        </div>
        <table>
          <thead>
            <tr><th>ìˆœìœ„</th><th>ì´ë¦„</th><th>ì ìˆ˜</th><th>ì™„ë£Œ ì‹œê°„</th></tr>
          </thead>
          <tbody id="lbBody"></tbody>
        </table>
      </div>
    </section>

    <!-- ìš´ì˜ì ëª¨ë“œ ë²„íŠ¼ -->
    <button id="adminBtn" type="button">ğŸ§</button>
  </div>

  <script>
      let QUESTIONS = [
    {book:"ì°½ì„¸ê¸°",ref:"1:1",before:"íƒœì´ˆì—",blank:"í•˜ë‚˜ë‹˜",after:"ì´ ì²œì§€ë¥¼ ì°½ì¡°í•˜ì‹œë‹ˆë¼",answers:["í•˜ë‚˜ë‹˜"]},
    {book:"ì°½ì„¸ê¸°",ref:"1:3",before:"í•˜ë‚˜ë‹˜ì´ ì´ë¥´ì‹œë˜",blank:"ë¹›",after:" ìˆìœ¼ë¼ í•˜ì‹œë§¤",answers:["ë¹›"]},
    {book:"ì°½ì„¸ê¸°",ref:"2:7",before:"ì—¬í˜¸ì™€ í•˜ë‚˜ë‹˜ì´ í™ìœ¼ë¡œ ì‚¬ëŒì„ ì§€ìœ¼ì‹œê³  ê·¸ ì½”ì—",blank:"ìƒê¸°",after:"ë¥¼ ë¶ˆì–´ë„£ìœ¼ì‹œë‹ˆ",answers:["ìƒê¸°"]},
    {book:"ì°½ì„¸ê¸°",ref:"2:18",before:"ì‚¬ëŒì´ í˜¼ì ì‚¬ëŠ” ê²ƒì´",blank:"ì¢‹ì§€ ì•„ë‹ˆí•˜ë‹ˆ",after:"",answers:["ì¢‹ì§€ ì•„ë‹ˆí•˜ë‹ˆ"]},
    {book:"ì°½ì„¸ê¸°",ref:"2:24",before:"ë‘˜ì´",blank:"í•œ ëª¸",after:"ì„ ì´ë£¨ë¦¬ë¼",answers:["í•œ ëª¸","í•œëª¸"]},
    {book:"ì°½ì„¸ê¸°",ref:"3:1",before:"",blank:"ë±€",after:"ì€ ê°€ì¥ ê°„êµí•˜ë‹ˆë¼",answers:["ë±€"]},
    {book:"ì°½ì„¸ê¸°",ref:"3:6",before:"ì—¬ìê°€ ê·¸",blank:"ì—´ë§¤",after:"ë¥¼ ë”°ë¨¹ê³ ",answers:["ì—´ë§¤"]},
    {book:"ì°½ì„¸ê¸°",ref:"3:19",before:"ë„ˆëŠ” í™ì´ë‹ˆ",blank:"í™ìœ¼ë¡œ ëŒì•„ê°ˆ ê²ƒì´ë‹ˆë¼",after:"",answers:["í™ìœ¼ë¡œ ëŒì•„ê°ˆ ê²ƒì´ë‹ˆë¼","í™ìœ¼ë¡œëŒì•„ê°ˆê²ƒì´ë‹ˆë¼"]},
    {book:"ì°½ì„¸ê¸°",ref:"4:4",before:"ì—¬í˜¸ì™€ê»˜ì„œ ì•„ë²¨ê³¼ ê·¸ì˜",blank:"ì œë¬¼",after:"ì€ ì—´ë‚©í•˜ì…¨ìœ¼ë‚˜",answers:["ì œë¬¼"]},
    {book:"ì°½ì„¸ê¸°",ref:"4:9",before:"ì—¬í˜¸ì™€ê»˜ì„œ ê°€ì¸ì—ê²Œ ì´ë¥´ì‹œë˜ ë„¤",blank:"ì•„ìš°",after:" ì•„ë²¨ì´ ì–´ë”” ìˆëŠëƒ",answers:["ì•„ìš°","ë™ìƒ"]},
    {book:"ì°½ì„¸ê¸°",ref:"6:8",before:"ê·¸ëŸ¬ë‚˜",blank:"ë…¸ì•„",after:"ëŠ” ì€í˜œë¥¼ ì…ì—ˆë”ë¼",answers:["ë…¸ì•„"]},
    {book:"ì°½ì„¸ê¸°",ref:"7:1",before:"ë„ˆì™€ ë„¤ ì˜¨ ì§‘ì€",blank:"ë°©ì£¼",after:"ë¡œ ë“¤ì–´ê°€ë¼",answers:["ë°©ì£¼"]},
    {book:"ì°½ì„¸ê¸°",ref:"7:17",before:"",blank:"í™ìˆ˜",after:"ê°€ ì‚¬ì‹­ ì£¼ì•¼ ë™ì•ˆ",answers:["í™ìˆ˜"]},
    {book:"ì°½ì„¸ê¸°",ref:"8:4",before:"ë°©ì£¼ëŠ”",blank:"ì•„ë¼ëì‚°",after:"ì— ë¨¸ë¬¼ë €ìœ¼ë©°",answers:["ì•„ë¼ëì‚°"]},
    {book:"ì°½ì„¸ê¸°",ref:"9:13",before:"ë‚´",blank:"ë¬´ì§€ê°œ",after:"ë¥¼ êµ¬ë¦„ ì†ì— ë‘ì—ˆë‚˜ë‹ˆ",answers:["ë¬´ì§€ê°œ"]},
    {book:"ì°½ì„¸ê¸°",ref:"12:1",before:"ì—¬í˜¸ì™€ê»˜ì„œ",blank:"ì•„ë¸ŒëŒ",after:"ì—ê²Œ ì´ë¥´ì‹œë˜",answers:["ì•„ë¸ŒëŒ"]},
    {book:"ì°½ì„¸ê¸°",ref:"12:2",before:"ë„ˆë¡œ í°",blank:"ë¯¼ì¡±",after:"ì„ ì´ë£¨ê³ ",answers:["ë¯¼ì¡±"]},
    {book:"ì°½ì„¸ê¸°",ref:"15:6",before:"ì•„ë¸ŒëŒì´ ì—¬í˜¸ì™€ë¥¼",blank:"ë¯¿ìœ¼ë‹ˆ",after:" ê·¸ë¥¼ ì˜ë¡œ ì—¬ê¸°ì…¨ë‹¤",answers:["ë¯¿ìœ¼ë‹ˆ","ë¯¿ì—ˆë‹¤"]},
    {book:"ì°½ì„¸ê¸°",ref:"17:5",before:"ë„¤ ì´ë¦„ì„ ì•„ë¸ŒëŒì´ ì•„ë‹ˆë¼",blank:"ì•„ë¸Œë¼í•¨",after:"ì´ë¼ í•˜ë¦¬ë‹ˆ",answers:["ì•„ë¸Œë¼í•¨"]},
    {book:"ì°½ì„¸ê¸°",ref:"21:3",before:"ì•„ë¸Œë¼í•¨ì´ ì‚¬ë¼ì—ê²Œì„œ ë‚³ì€ ì•„ë“¤ì˜ ì´ë¦„ì„",blank:"ì´ì‚­",after:"ì´ë¼ í•˜ì˜€ê³ ",answers:["ì´ì‚­"]},
    {book:"ì°½ì„¸ê¸°",ref:"22:2",before:"ë„¤ ì•„ë“¤ ë„¤ ì‚¬ë‘í•˜ëŠ” ë…ì",blank:"ì´ì‚­",after:"ì„ ë²ˆì œë¡œ ë“œë¦¬ë¼",answers:["ì´ì‚­"]},
    {book:"ì°½ì„¸ê¸°",ref:"22:14",before:"ì•„ë¸Œë¼í•¨ì´ ê·¸ê³³ ì´ë¦„ì„",blank:"ì—¬í˜¸ì™€ ì´ë ˆ",after:"ë¼ í•˜ì˜€ë”ë¼",answers:["ì—¬í˜¸ì™€ ì´ë ˆ","ì—¬í˜¸ì™€ì´ë ˆ"]},
    {book:"ì°½ì„¸ê¸°",ref:"24:15",before:"ë¦¬ë¸Œê°€ê°€ ë¬¼ë™ì´ë¥¼ ì–´ê¹¨ì— ë©”ê³ ",blank:"ë‚˜ì˜¤ë”ë¼",after:"",answers:["ë‚˜ì˜¤ë”ë¼"]},
    {book:"ì°½ì„¸ê¸°",ref:"25:23",before:"í° ìëŠ”",blank:"ì‘ì€ ìë¥¼ ì„¬ê¸°ë¦¬ë¼",after:"",answers:["ì‘ì€ ìë¥¼ ì„¬ê¸°ë¦¬ë¼","ì‘ì€ì"]},
    {book:"ì°½ì„¸ê¸°",ref:"26:12",before:"ì´ì‚­ì´ ê·¸ ë•…ì—ì„œ ë†ì‚¬í•˜ì—¬",blank:"ë°±ë°°",after:"ë‚˜ ì–»ì—ˆê³ ",answers:["ë°±ë°°","ë°±ë°°ë‚˜"]},
    {book:"ì°½ì„¸ê¸°",ref:"27:29",before:"ë§Œë¯¼ì´ ë„ˆë¥¼",blank:"ì„¬ê¸°ê³ ",after:" ì—´êµ­ì´ ë„¤ê²Œ êµ´ë³µí•˜ë¦¬ë‹ˆ",answers:["ì„¬ê¸°ê³ "]},
    {book:"ì°½ì„¸ê¸°",ref:"28:12",before:"ê¿ˆì— ë³¸ì¦‰ ì‚¬ë‹¥ë‹¤ë¦¬ê°€",blank:"í•˜ëŠ˜ì— ë‹¿ì•˜ê³ ",after:"",answers:["í•˜ëŠ˜ì— ë‹¿ì•˜ê³ ","ì‚¬ë‹¥ë‹¤ë¦¬"]},
    {book:"ì°½ì„¸ê¸°",ref:"28:17",before:"ì´ê²ƒì€",blank:"í•˜ë‚˜ë‹˜ì˜ ì§‘",after:"ì´ìš” ì´ëŠ” í•˜ëŠ˜ì˜ ë¬¸ì´ë¡œë‹¤",answers:["í•˜ë‚˜ë‹˜ì˜ ì§‘","í•˜ë‚˜ë‹˜ì§‘"]},
    {book:"ì°½ì„¸ê¸°",ref:"29:20",before:"ì•¼ê³±ì´ ë¼í—¬ì„ ì‚¬ë‘í•˜ë¯€ë¡œ ì¹  ë…„ì„",blank:"ìˆ˜ì¼ê°™ì´",after:"ì—¬ê²¼ë”ë¼",answers:["ìˆ˜ì¼ê°™ì´","ë©°ì¹ ê°™ì´"]},
    {book:"ì°½ì„¸ê¸°",ref:"30:22",before:"í•˜ë‚˜ë‹˜ì´ ë¼í—¬ì„",blank:"ìƒê°í•˜ì‹ ì§€ë¼",after:"",answers:["ìƒê°í•˜ì‹ ì§€ë¼"]},
    {book:"ì°½ì„¸ê¸°",ref:"32:28",before:"ë„¤ ì´ë¦„ì„ ì•¼ê³±ì´ ì•„ë‹ˆìš”",blank:"ì´ìŠ¤ë¼ì—˜",after:"ì´ë¼ í•˜ë¦¬ë¼",answers:["ì´ìŠ¤ë¼ì—˜"]},
    {book:"ì°½ì„¸ê¸°",ref:"33:4",before:"ì—ì„œê°€ ë‹¬ë ¤ì™€ì„œ ì•¼ê³±ì„",blank:"ì•ˆê³  ì…ë§ì¶”ë©° ìš¸ì—ˆë”ë¼",after:"",answers:["ì•ˆê³  ì…ë§ì¶”ë©° ìš¸ì—ˆë”ë¼","ì•ˆê³  ìš¸ì—ˆë”ë¼"]},
    {book:"ì°½ì„¸ê¸°",ref:"35:19",before:"ë¼í—¬ì´ ì£½ìœ¼ë§¤ ê·¸ë¥¼",blank:"ë² ë“¤ë ˆí—´ ê¸¸",after:"ì— ì¥ì‚¬í•˜ì˜€ë”ë¼",answers:["ë² ë“¤ë ˆí—´ ê¸¸","ë² ë“¤ë ˆí—´"]},
    {book:"ì°½ì„¸ê¸°",ref:"37:3",before:"ì´ìŠ¤ë¼ì—˜ì´",blank:"ìš”ì…‰",after:"ì„ ë” ì‚¬ë‘í•˜ë¯€ë¡œ",answers:["ìš”ì…‰"]},
    {book:"ì°½ì„¸ê¸°",ref:"37:28",before:"í˜•ë“¤ì´ ìš”ì…‰ì„ ì€",blank:"ìŠ¤ë¬´ ê°œ",after:"ì— íŒ”ì•˜ë‹¤",answers:["ìŠ¤ë¬´ ê°œ","ìŠ¤ë¬´ê°œ"]},
    {book:"ì°½ì„¸ê¸°",ref:"39:2",before:"ì—¬í˜¸ì™€ê»˜ì„œ ìš”ì…‰ê³¼ í•¨ê»˜ í•˜ì‹œë¯€ë¡œ ê·¸ê°€",blank:"í˜•í†µí•œ ì",after:"ê°€ ë˜ì—ˆë‹¤",answers:["í˜•í†µí•œ ì","í˜•í†µ"]},
    {book:"ì°½ì„¸ê¸°",ref:"41:16",before:"ìš”ì…‰ì´ ë°”ë¡œì—ê²Œ ëŒ€ë‹µí•˜ë˜",blank:"í•˜ë‚˜ë‹˜ì´ í‰ì•ˆí•œ ëŒ€ë‹µì„",after:"í•˜ì‹œë¦¬ì´ë‹¤",answers:["í•˜ë‚˜ë‹˜ì´ í‰ì•ˆí•œ ëŒ€ë‹µì„","í•˜ë‚˜ë‹˜"]},
    {book:"ì°½ì„¸ê¸°",ref:"41:52",before:"ì°¨ìì˜ ì´ë¦„ì„",blank:"ì—ë¸Œë¼ì„",after:"ì´ë¼ í•˜ì˜€ìœ¼ë‹ˆ",answers:["ì—ë¸Œë¼ì„"]},
    {book:"ì°½ì„¸ê¸°",ref:"45:5",before:"í•˜ë‚˜ë‹˜ì´ ìƒëª…ì„",blank:"êµ¬ì›í•˜ì‹œë ¤ê³ ",after:" ë‚˜ë¥¼ ë¨¼ì € ë³´ë‚´ì…¨ë‚˜ì´ë‹¤",answers:["êµ¬ì›í•˜ì‹œë ¤ê³ ","êµ¬ì›"]},
    {book:"ì°½ì„¸ê¸°",ref:"50:20",before:"ë„ˆí¬ëŠ” ë‚˜ë¥¼ í•´í•˜ë ¤ í•˜ì˜€ìœ¼ë‚˜ í•˜ë‚˜ë‹˜ì€ ê·¸ê²ƒì„",blank:"ì„ ìœ¼ë¡œ ë°”ê¾¸ì‚¬",after:"",answers:["ì„ ìœ¼ë¡œ ë°”ê¾¸ì‚¬","ì„ "]},
    {book:"ì°½ì„¸ê¸°",ref:"1:31",before:"í•˜ë‚˜ë‹˜ì´ ì§€ìœ¼ì‹  ëª¨ë“  ê²ƒì„ ë³´ì‹œë‹ˆ",blank:"ì‹¬íˆ ì¢‹ì•˜ë”ë¼",after:"",answers:["ì‹¬íˆ ì¢‹ì•˜ë”ë¼","ì‹¬íˆì¢‹ì•˜ë”ë¼"]},
    {book:"ì°½ì„¸ê¸°",ref:"3:15",before:"ì—¬ìì˜ í›„ì†ì€ ë„¤ ë¨¸ë¦¬ë¥¼",blank:"ìƒí•˜ê²Œ í•  ê²ƒì´ìš”",after:"",answers:["ìƒí•˜ê²Œ í•  ê²ƒì´ìš”","ìƒí•˜ê²Œ"]},
    {book:"ì°½ì„¸ê¸°",ref:"4:26",before:"ì…‹ì€ ì•„ë“¤ì„ ë‚³ê³  ê·¸ì˜ ì´ë¦„ì„",blank:"ì—ë…¸ìŠ¤",after:"ë¼ í•˜ì˜€ìœ¼ë©°",answers:["ì—ë…¸ìŠ¤"]},
    {book:"ì°½ì„¸ê¸°",ref:"5:24",before:"ì—ë…¹ì´ í•˜ë‚˜ë‹˜ê³¼ ë™í–‰í•˜ë”ë‹ˆ",blank:"í•˜ë‚˜ë‹˜ì´ ë°ë ¤ê°€ì‹œë¯€ë¡œ",after:"",answers:["í•˜ë‚˜ë‹˜ì´ ë°ë ¤ê°€ì‹œë¯€ë¡œ","ë°ë ¤ê°€ì‹œë¯€ë¡œ"]},
    {book:"ì°½ì„¸ê¸°",ref:"6:5",before:"ì‚¬ëŒì˜",blank:"ì£„ì•…",after:"ì´ ê°€ë“í•¨ì„ ë³´ì‹œê³ ",answers:["ì£„ì•…"]},
    {book:"ì°½ì„¸ê¸°",ref:"6:22",before:"ë…¸ì•„ê°€ í•˜ë‚˜ë‹˜ì´ ëª…í•˜ì‹  ëŒ€ë¡œ",blank:"ë‹¤ ì¤€í–‰í•˜ì˜€ë”ë¼",after:"",answers:["ë‹¤ ì¤€í–‰í•˜ì˜€ë”ë¼","ì¤€í–‰í•˜ì˜€ë”ë¼"]},
    {book:"ì°½ì„¸ê¸°",ref:"8:11",before:"ë¹„ë‘˜ê¸°ê°€ ê°ëŒë‚˜ë¬´ ìƒˆ",blank:"ìì‚¬ê·€",after:"ë¥¼ ë¬¼ê³  ì™”ë”ë¼",answers:["ìì‚¬ê·€","ììƒˆ"]},
    {book:"ì°½ì„¸ê¸°",ref:"9:6",before:"ì‚¬ëŒì˜",blank:"í”¼ë¥¼ í˜ë¦¬ë©´",after:" ì‚¬ëŒì´ ê·¸ í”¼ë¥¼ í˜ë¦¬ë¦¬ë‹ˆ",answers:["í”¼ë¥¼ í˜ë¦¬ë©´","í”¼"]},
    {book:"ì°½ì„¸ê¸°",ref:"11:9",before:"ê·¸ ì„± ì´ë¦„ì„",blank:"ë°”ë²¨",after:"ì´ë¼ í•˜ì˜€ë”ë¼",answers:["ë°”ë²¨"]},
    {book:"ì°½ì„¸ê¸°",ref:"13:8",before:"ì•„ë¸ŒëŒì´ ë¡¯ì—ê²Œ ì´ë¥´ë˜ ìš°ë¦¬ëŠ”",blank:"í•œ ì¹œì¡±",after:"ì´ë¼ ë‹¤íˆ¬ì§€ ë§ì",answers:["í•œ ì¹œì¡±","ì¹œì¡±"]},
    {book:"ì°½ì„¸ê¸°",ref:"15:1",before:"ë‚˜ëŠ” ë„¤",blank:"ë°©íŒ¨ìš”",after:" ë„ˆì˜ í° ìƒê¸‰ì´ë‹ˆë¼",answers:["ë°©íŒ¨ìš”","ë°©íŒ¨"]},
    {book:"ì°½ì„¸ê¸°",ref:"17:19",before:"ë„¤ ì•„ë‚´ ì‚¬ë¼ê°€",blank:"ì•„ë“¤ì„ ë‚³ìœ¼ë¦¬ë‹ˆ",after:"",answers:["ì•„ë“¤ì„ ë‚³ìœ¼ë¦¬ë‹ˆ","ì•„ë“¤ì„ë‚³ìœ¼ë¦¬ë‹ˆ"]},
    {book:"ì°½ì„¸ê¸°",ref:"18:14",before:"ì—¬í˜¸ì™€ê»˜ ëŠ¥í•˜ì§€ ëª»í•œ ì¼ì´ ìˆê² ëŠëƒ",blank:"ì‚¬ë¼ì—ê²Œ ì•„ë“¤ì´ ìˆìœ¼ë¦¬ë¼",after:"",answers:["ì‚¬ë¼ì—ê²Œ ì•„ë“¤ì´ ìˆìœ¼ë¦¬ë¼","ì‚¬ë¼ì—ê²Œ ì•„ë“¤ì´"]},
    {book:"ì°½ì„¸ê¸°",ref:"19:26",before:"ë¡¯ì˜ ì•„ë‚´ëŠ” ë’¤ë¥¼ ëŒì•„ë³´ì•˜ìœ¼ë¯€ë¡œ",blank:"ì†Œê¸ˆ ê¸°ë‘¥",after:"ì´ ë˜ì—ˆë”ë¼",answers:["ì†Œê¸ˆ ê¸°ë‘¥","ì†Œê¸ˆê¸°ë‘¥"]},
    {book:"ì°½ì„¸ê¸°",ref:"21:6",before:"ì‚¬ë¼ê°€ ì´ë¥´ë˜ í•˜ë‚˜ë‹˜ì´ ë‚˜ë¥¼",blank:"ì›ƒê²Œ í•˜ì…¨ë‹¤",after:"",answers:["ì›ƒê²Œ í•˜ì…¨ë‹¤","ì›ƒê²Œ"]},
    {book:"ì°½ì„¸ê¸°",ref:"25:34",before:"ì—ì„œê°€ ì¥ìì˜",blank:"ëª…ë¶„ì„ ê²½í™€íˆ",after:"ì—¬ê²¼ë”ë¼",answers:["ëª…ë¶„ì„ ê²½í™€íˆ","ì¥ìëª…ë¶„"]},
    {book:"ì°½ì„¸ê¸°",ref:"28:15",before:"ë‚´ê°€ ë„ˆì™€ í•¨ê»˜ ìˆì–´",blank:"ë„ˆë¥¼ ë– ë‚˜ì§€ ì•„ë‹ˆí•˜ë¦¬ë¼",after:"",answers:["ë„ˆë¥¼ ë– ë‚˜ì§€ ì•„ë‹ˆí•˜ë¦¬ë¼","ë– ë‚˜ì§€ ì•„ë‹ˆí•˜ë¦¬ë¼"]},
    {book:"ì°½ì„¸ê¸°",ref:"33:20",before:"ì•¼ê³±ì´ ê·¸ê³³ì— ì œë‹¨ì„ ìŒ“ê³  ê·¸ ì´ë¦„ì„",blank:"ì—˜ì—˜ë¡œí—¤ì´ìŠ¤ë¼ì—˜",after:"ì´ë¼ ë¶ˆë €ë”ë¼",answers:["ì—˜ì—˜ë¡œí—¤ì´ìŠ¤ë¼ì—˜","ì—˜ ì—˜ë¡œí—¤ ì´ìŠ¤ë¼ì—˜"]},
    {book:"ì°½ì„¸ê¸°",ref:"35:3",before:"ìš°ë¦¬ë¥¼ í™˜ë‚œì—ì„œ ì‘ë‹µí•˜ì‹  í•˜ë‚˜ë‹˜ê»˜",blank:"ì˜ˆë°°í•˜ì",after:"",answers:["ì˜ˆë°°í•˜ì","ì œë‹¨ì„ ìŒ“ì"]},
    {book:"ì°½ì„¸ê¸°",ref:"47:9",before:"ë‚´ ë‚˜ê·¸ë„¤ ê¸¸ì˜ ì„¸ì›”ì´",blank:"ë°±ì‚¼ì‹­ ë…„",after:"ì´ë‹ˆì´ë‹¤",answers:["ë°±ì‚¼ì‹­ ë…„","ë°±ì‚¼ì‹­ë…„"]},
    {book:"ì°½ì„¸ê¸°",ref:"2:2",before:"í•˜ë‚˜ë‹˜ì´ ê·¸ê°€ í•˜ì‹œë˜ ì¼ì„",blank:"ì¼ê³±ì§¸ ë‚ ì— ë§ˆì¹˜ì‹œë‹ˆ",after:"",answers:["ì¼ê³±ì§¸ ë‚ ì— ë§ˆì¹˜ì‹œë‹ˆ","ì¼ê³±ì§¸ë‚ ì— ë§ˆì¹˜ì‹œë‹ˆ"]},
    {book:"ì°½ì„¸ê¸°",ref:"9:1",before:"í•˜ë‚˜ë‹˜ì´ ë…¸ì•„ì™€ ê·¸ ì•„ë“¤ë“¤ì—ê²Œ ì´ë¥´ì‹œë˜",blank:"ìƒìœ¡í•˜ê³  ë²ˆì„±í•˜ì—¬",after:" ë•…ì— ì¶©ë§Œí•˜ë¼",answers:["ìƒìœ¡í•˜ê³  ë²ˆì„±í•˜ì—¬","ìƒìœ¡í•˜ê³  ë²ˆì„±í•˜ë¼"]},
    {book:"ì°½ì„¸ê¸°",ref:"11:7",before:"ì, ìš°ë¦¬ê°€ ë‚´ë ¤ê°€ì„œ ê·¸ë“¤ì˜",blank:"ì–¸ì–´ë¥¼ í˜¼ì¡í•˜ê²Œ í•˜ì",after:"",answers:["ì–¸ì–´ë¥¼ í˜¼ì¡í•˜ê²Œ í•˜ì","ì–¸ì–´í˜¼ì¡"]},
    {book:"ì°½ì„¸ê¸°",ref:"12:3",before:"ë•…ì˜ ëª¨ë“  ì¡±ì†ì´ ë„ˆë¡œ ë§ë¯¸ì•”ì•„",blank:"ë³µì„ ì–»ì„ ê²ƒì´ë¼",after:"",answers:["ë³µì„ ì–»ì„ ê²ƒì´ë¼","ë³µ"]},
    {book:"ì°½ì„¸ê¸°",ref:"13:14",before:"ë™ì„œë‚¨ë¶ì„ ë°”ë¼ë³´ë¼ ì´ ë•…ì„ ë„¤",blank:"ìì†ì—ê²Œ ì£¼ë¦¬ë‹ˆ",after:"",answers:["ìì†ì—ê²Œ ì£¼ë¦¬ë‹ˆ","ìì†ì—ê²Œ"]},
    {book:"ì°½ì„¸ê¸°",ref:"14:20",before:"ë„ˆì˜ ëŒ€ì ì„ ë„¤ ì†ì— ë¶™ì´ì‹ ",blank:"ì§€ê·¹íˆ ë†’ìœ¼ì‹  í•˜ë‚˜ë‹˜",after:"ì„ ì°¬ì†¡í• ì§€ë¡œë‹¤",answers:["ì§€ê·¹íˆ ë†’ìœ¼ì‹  í•˜ë‚˜ë‹˜","ì§€ê·¹íˆë†’ìœ¼ì‹ í•˜ë‚˜ë‹˜"]},
    {book:"ì°½ì„¸ê¸°",ref:"18:2",before:"ì•„ë¸Œë¼í•¨ì´ ëˆˆì„ ë“¤ì–´ ë³¸ì¦‰",blank:"ì„¸ ì‚¬ëŒì´ ì„œ ìˆëŠ”ì§€ë¼",after:"",answers:["ì„¸ ì‚¬ëŒì´ ì„œ ìˆëŠ”ì§€ë¼","ì„¸ì‚¬ëŒ"]},
    {book:"ì°½ì„¸ê¸°",ref:"18:18",before:"ì•„ë¸Œë¼í•¨ì€ ê°•ëŒ€í•œ",blank:"ë‚˜ë¼ê°€ ë˜ê³ ",after:"",answers:["ë‚˜ë¼ê°€ ë˜ê³ ","ë‚˜ë¼"]},
    {book:"ì°½ì„¸ê¸°",ref:"19:17",before:"ìƒëª…ì„ ë³´ì „í•˜ë¼ ë’¤ë¥¼ ëŒì•„ë³´ì§€ ë§ê³ ",blank:"ì‚°ìœ¼ë¡œ ë„ë§í•˜ë¼",after:"",answers:["ì‚°ìœ¼ë¡œ ë„ë§í•˜ë¼","ì‚°ìœ¼ë¡œ"]},
    {book:"ì°½ì„¸ê¸°",ref:"21:10",before:"ì´ ì—¬ì¢…ê³¼ ê·¸ ì•„ë“¤ì„",blank:"ë‚´ì«“ìœ¼ë¼",after:"",answers:["ë‚´ì«“ìœ¼ë¼","ë‚´ì–´ì«“ìœ¼ë¼"]},
    {book:"ì°½ì„¸ê¸°",ref:"21:12",before:"ë„¤ ì”¨ëŠ”",blank:"ì´ì‚­ìœ¼ë¡œ ë§ë¯¸ì•”ìœ¼ë¦¬ë¼",after:"",answers:["ì´ì‚­ìœ¼ë¡œ ë§ë¯¸ì•”ìœ¼ë¦¬ë¼","ì´ì‚­"]},
    {book:"ì°½ì„¸ê¸°",ref:"22:18",before:"ë„¤ ì”¨ë¡œ ë§ë¯¸ì•”ì•„ ì²œí•˜ ë§Œë¯¼ì´",blank:"ë³µì„ ë°›ìœ¼ë¦¬ë¼",after:"",answers:["ë³µì„ ë°›ìœ¼ë¦¬ë¼","ë³µ"]},
    {book:"ì°½ì„¸ê¸°",ref:"24:12",before:"ì•„ë¸Œë¼í•¨ì˜ í•˜ë‚˜ë‹˜ ì—¬í˜¸ì™€ì—¬ ì˜¤ëŠ˜ ë‚˜ë¡œ",blank:"ìˆœì¡°ë¡­ê²Œ ë§Œë‚˜ê²Œ í•˜ì˜µì†Œì„œ",after:"",answers:["ìˆœì¡°ë¡­ê²Œ ë§Œë‚˜ê²Œ í•˜ì˜µì†Œì„œ","ìˆœì¡°ë¡­ê²Œ"]},
    {book:"ì°½ì„¸ê¸°",ref:"24:27",before:"ì—¬í˜¸ì™€ê»˜ì„œ ë‚˜ë¥¼",blank:"ì¸ë„í•˜ì‚¬",after:" ë‚´ ì£¼ì¸ì˜ ë™ìƒ ì§‘ì— ì´ë¥´ê²Œ í•˜ì…¨ë‹¤",answers:["ì¸ë„í•˜ì‚¬","ì¸ë„"]},
    {book:"ì°½ì„¸ê¸°",ref:"24:60",before:"ìš°ë¦¬ ëˆ„ì´ì—¬ ë„ˆëŠ” ì²œë§Œì¸ì˜",blank:"ì–´ë¨¸ë‹ˆê°€ ë ì§€ì–´ë‹¤",after:"",answers:["ì–´ë¨¸ë‹ˆê°€ ë ì§€ì–´ë‹¤","ì–´ë¨¸ë‹ˆ"]},
    {book:"ì°½ì„¸ê¸°",ref:"26:3",before:"ë‚´ê°€ ë„ˆì™€ í•¨ê»˜ ìˆì–´ ë„¤ê²Œ",blank:"ë³µì„ ì£¼ë¦¬ë¼",after:"",answers:["ë³µì„ ì£¼ë¦¬ë¼","ë³µ"]},
    {book:"ì°½ì„¸ê¸°",ref:"26:24",before:"ë‘ë ¤ì›Œí•˜ì§€ ë§ë¼ ë‚´ê°€ ë„ˆì™€ í•¨ê»˜ ìˆì–´ ë„¤ê²Œ",blank:"ë³µì„ ì£¼ë©°",after:"",answers:["ë³µì„ ì£¼ë©°","ë³µ"]},
    {book:"ì°½ì„¸ê¸°",ref:"29:28",before:"ë¼ë°˜ì´ ë”¸",blank:"ë¼í—¬",after:"ë„ ì•¼ê³±ì—ê²Œ ì•„ë‚´ë¡œ ì£¼ì—ˆë”ë¼",answers:["ë¼í—¬"]},
    {book:"ì°½ì„¸ê¸°",ref:"30:27",before:"ì—¬í˜¸ì™€ê»˜ì„œ ë„¤ê²Œ",blank:"ë³µì„ ì£¼ì‹  ì¤„ì„",after:" ë‚´ê°€ ê¹¨ë‹¬ì•˜ë‹¤",answers:["ë³µì„ ì£¼ì‹  ì¤„ì„","ë³µ"]},
    {book:"ì°½ì„¸ê¸°",ref:"31:49",before:"ê·¸ ì´ë¦„ì„",blank:"ë¯¸ìŠ¤ë°”",after:"ë¼ í•˜ì˜€ë”ë¼",answers:["ë¯¸ìŠ¤ë°”"]}
  ];


    const TARGET=1000, POINT=30, LIMIT=20, MAX_LIVES=10;
    let playerName='ê²ŒìŠ¤íŠ¸',score=0,idx=0,left=LIMIT,order=[],timer=null,currentQ=null,lives=MAX_LIVES,locked=false;

    const el={
      start:document.getElementById('start'),quiz:document.getElementById('quiz'),leaderboard:document.getElementById('leaderboard'),
      nameInput:document.getElementById('nameInput'),playerBadge:document.getElementById('playerBadge'),score:document.getElementById('score'),
      time:document.getElementById('time'),qIndex:document.getElementById('qIndex'),bar:document.getElementById('bar'),
      verse:document.getElementById('verse'),ref:document.getElementById('ref'),answer:document.getElementById('answer'),
      feedback:document.getElementById('feedback'),lbBody:document.getElementById('lbBody'),lives:document.getElementById('lives'),
      scoreBoard:document.getElementById('scoreBoard')
    };

    function shuffle(array){
      for(let i=array.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [array[i],array[j]]=[array[j],array[i]];
      }
    }

    function showStart(){
      clearInterval(timer);
      el.start.style.display='grid';
      el.quiz.style.display='none';
      el.leaderboard.style.display='none';
      el.scoreBoard.style.display='none';
      el.lives.textContent = MAX_LIVES;
    }
    function showQuiz(){
      el.start.style.display='none';
      el.quiz.style.display='block';
      el.leaderboard.style.display='none';
      el.scoreBoard.style.display='flex';
    }
    function showLeaderboard(){
      clearInterval(timer);
      el.start.style.display='none';
      el.quiz.style.display='none';
      el.leaderboard.style.display='block';
      el.scoreBoard.style.display='none';
      renderLeaderboard();
    }

    function startGame(){
      playerName=el.nameInput.value||'ê²ŒìŠ¤íŠ¸';el.playerBadge.textContent=playerName;
      score=0;idx=0;lives=MAX_LIVES;el.lives.textContent=lives;
      order=[...Array(QUESTIONS.length).keys()];
      shuffle(order);
      showQuiz();nextQuestion();
    }
    function nextQuestion(){
      if(lives<=0){endGame(false);return;}
      if(order.length===0){order=[...Array(QUESTIONS.length).keys()];shuffle(order);}
      currentQ=QUESTIONS[order.shift()];idx++;
      el.qIndex.textContent=idx;el.ref.textContent=`${currentQ.book} ${currentQ.ref}`;
      el.verse.innerHTML = `${currentQ.before} <span class="blank">_____</span> ${currentQ.after}`;
      resetAnswerInput();
      locked = false;
      setTimeout(function(){ try{ el.answer.focus(); }catch(e){} }, 0);
      runTimer();
    }
    function runTimer(){left=LIMIT;el.time.textContent=left;el.bar.style.width='100%';clearInterval(timer);timer=setInterval(()=>{left--;el.time.textContent=left;el.bar.style.width=(left/LIMIT*100)+'%';if(left<0){clearInterval(timer);loseLife(`â° ì‹œê°„ì´ˆê³¼! ì •ë‹µ: ${currentQ.blank}`);}},1000);}
    function submitAnswer(){
      if(locked) return; locked=true;
      const ans=norm(el.answer.value.trim());
      const accepts=(currentQ.answers&&currentQ.answers.length? currentQ.answers : [currentQ.blank]).map(norm);
      if(accepts.includes(ans)){ 
        score+=POINT;el.score.textContent=score;feedback(true,'ì •ë‹µ!');
      } else {
        loseLife('ì˜¤ë‹µ! ì •ë‹µ:'+currentQ.blank);
        return;
      }
      setTimeout(nextQuestion,800);
    }
    function loseLife(msg){
      locked=true;
      lives--;el.lives.textContent=lives;feedback(false,msg);
      if(lives<=0){endGame(false);} else {setTimeout(nextQuestion,800);}
    }
    function feedback(ok,msg){el.feedback.style.display='block';el.feedback.textContent=msg;el.feedback.className='result '+(ok?'good':'bad');}

    function endGame(success=true){
      if(success){
        const now=new Date();
        const finished= now.getFullYear()+"-"+String(now.getMonth()+1).padStart(2,'0')+"-"+String(now.getDate()).padStart(2,'0')+" "+now.toLocaleTimeString();
        let records=JSON.parse(localStorage.getItem('records')||'[]');
        records.push({name:playerName,score:score,time:finished});
        localStorage.setItem('records',JSON.stringify(records));
      }
      showLeaderboard();
    }

    function renderLeaderboard(){
      let records=JSON.parse(localStorage.getItem('records')||'[]');
      records.sort((a,b)=> b.score-a.score);
      el.lbBody.innerHTML=records.map((r,i)=>`<tr><td>${i+1}</td><td>${r.name}</td><td>${r.score}</td><td>${r.time}</td></tr>`).join('');
    }

    document.getElementById('startBtn').onclick=startGame;
    document.getElementById('submitBtn').onclick=submitAnswer;
    function norm(s){
      s = (s||'').toString().toLowerCase();
      s = s.split(' ').join('');
      var rm = ['[',']','(',')','{','}','\'','.',',',':',';','!','?','Â·','â€¦','â€”','â€“','-','"'];
      for (var i=0;i<rm.length;i++){ s = s.split(rm[i]).join(''); }
      return s;
    }
    function isCorrectInput(){
      if(!currentQ) return false;
      var ans = norm(document.getElementById('answer').value);
      var accepts = (currentQ.answers && currentQ.answers.length ? currentQ.answers : [currentQ.blank]).map(norm);
      return accepts.includes(ans);
    }
    function attachAnswerListeners(){
      el.answer.addEventListener('keydown', function(e){ if(e.key==='Enter'){ submitAnswer(); }});
      el.answer.addEventListener('input', function(){ if(!locked && isCorrectInput()){ submitAnswer(); }});
    }
    function resetAnswerInput(){
      var old = document.getElementById('answer');
      var fresh = old.cloneNode(false);
      fresh.id = 'answer';
      fresh.className = old.className;
      fresh.type = old.type || 'text';
      fresh.placeholder = old.placeholder || '';
      fresh.autocomplete = 'off';
      fresh.autocapitalize = 'off';
      fresh.autocorrect = 'off';
      fresh.spellcheck = false;
      fresh.inputMode = 'text';
      old.parentNode.replaceChild(fresh, old);
      el.answer = fresh;
      el.answer.value = '';
      attachAnswerListeners();
    }
    attachAnswerListeners();
    document.getElementById('passBtn').onclick=()=>{loseLife('íŒ¨ìŠ¤! ì •ë‹µ:'+currentQ.blank)};
    document.getElementById('rankBtn').onclick=showLeaderboard;
    document.getElementById('backStart').onclick=showStart;

    // ìš´ì˜ì ëª¨ë“œ ë²„íŠ¼
    document.getElementById('adminBtn').onclick=()=>{
      const pw=prompt('ë¹„ë°€ë²ˆí˜¸ ì…ë ¥');
      if(pw==='eckc3004'){
        if(confirm('ë­í‚¹ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')){
          localStorage.removeItem('records');
          alert('ë­í‚¹ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
          renderLeaderboard();
        }
      } else {alert('ë¹„ë°€ë²ˆí˜¸ ì˜¤ë¥˜');}
    };

    showStart();
  </script>
</body>
</html>
